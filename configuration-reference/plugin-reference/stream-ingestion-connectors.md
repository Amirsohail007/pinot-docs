---
description: >-
  This documents lists all the configurations for each of the supported stream
  ingestion connectors.
---

# Stream Ingestion Connectors

## Applicable to all Stream Connectors

| Configuration                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| stream.\<stream\_type>.consumer.type                   | <p>Type of the consumer<br><strong>Allowed values:</strong> <code>lowlevel</code>  <strong>,</strong> <code>highlevel</code><br>Case-insensitive</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| stream.\<stream\_type>.consumer.factory.class.name     | Factory class to be used for the stream consumer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| stream.\<stream\_type>.consumer.prop.auto.offset.reset | <p>Offset or position in the source stream from which to start consuming data<br><strong>Valid values:</strong> <br><strong><code>smallest</code></strong> - Start consuming from the earliest data in the stream<br><strong><code>largest</code></strong> - Start consuming from the latest data in the stream<br><strong><code>timestamp</code></strong> - Start consuming from the offset after a timestamp , which is specified in the format <code>yyyy-MM-dd'T'HH:mm:ss.SSSZ</code><br><strong><code>datetime</code> -</strong> Start consuming from the offset after the specified period or duration from current time. Eg: <code>2d</code> <br><strong>Default Value:</strong> <code>largest</code> </p> |
| stream.\<stream\_type>.topic.name                      | Name of the source stream to consume                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| stream.\<stream\_type>.fetch.timeout.millis            | <p>Indicates the timeout (in milliseconds) to use for each fetch call to the consumer. If the timeout expires before data becomes available, the consumer will return an empty batch.<br><strong>Default Value:</strong> <code>5_000</code></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| stream.\<stream\_type>.connection.timeout.millis       | <p>Indicates the timeout (in milliseconds) used to create the connection to the upstream (Currently, used only by Kafka 0.9 partition level consumer)<br><strong>Default Value:</strong> <code>30_000</code></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| stream.\<stream\_type>.idle.timeout.millis             | <p>If the stream remains idle (ie. without any data) for the specified time, the client connection is reset and a new consumer instance is created.  <br><strong>Default Value:</strong> <code>180_000</code></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| stream.\<stream\_type>.decoder.class.name              | Indicates the name of the decoder class that should be used to decoder the stream payload                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| stream.\<stream\_type>.decoder.prop                    | Prefix used for any decoder specific property                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| topic.consumption.rate.limit                           | <p>Indicates the upper bound on the message rate for the entire topic. Use <code>-1</code> to ignore this config. <br><strong>Default Value:</strong> <code>-1</code><br>See <a href="https://docs.pinot.apache.org/basics/data-import/pinot-stream-ingestion#throttling-stream-consumption">here</a> for more details.</p>                                                                                                                                                                                                                                                                                                                                                                                       |
| stream.\<stream\_type>.metadata.populate               | <p>When set to <code>true</code>, the supported consumer may extract the key, user headers and record metadata from the incoming payload. <br>Currently, this is supported in Kafka connector only.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| realtime.segment.flush.threshold.time                  | <p>Time based flush threshold for realtime segments. Used to decides when a realtime segment is ready to be committed / closed / flushed to disk.<br><br><span data-gb-custom-inline data-tag="emoji" data-code="26a0">⚠</span> This time should be smaller than the retention period configured for the corresponding topic</p>                                                                                                                                                                                                                                                                                                                                                                                  |
| realtime.segment.flush.threshold.size                  | <p>The desired size of a completed realtime segment. <br><br><span data-gb-custom-inline data-tag="emoji" data-code="2139">ℹ</span>This config is used only if <code>realtime.segment.flush.threshold.rows</code> is set to 0.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| realtime.segment.flush.threshold.rows                  | <p>Row count based flush threshold for realtime segments. This behaves in a similar way for HLC and LLC. For HLC,</p><p>since there is only one consumer per server, this size is used as the size of the consumption buffer and determines after how many rows we flush to disk. For example, if this threshold is set to two million rows,</p><p>then a high level consumer would have a buffer size of two million.</p><p>If this value is set to 0, then the consumers adjust the number of rows consumed by a partition such that the size of the completed segment is the desired size (unless</p><p>threshold.time is reached first)</p>                                                                   |
| realtime.segment.flush.autotune.initialRows            | <p>Initial number of rows to use for <code>SegmentSizeBasedFlushThresholdUpdater</code> . This threshold updater is used by the controller to compute the new segment's flush threshold based on the previous segment's size. <br><span data-gb-custom-inline data-tag="emoji" data-code="26a0">⚠</span> This flush threshold updater is used only when <code>realtime.segment.flush.threshold.rows</code> is set to <code>&#x3C;=0</code> . Otherwise, the <code>DefaultFlushThresholdUpdater</code> is used. </p>                                                                                                                                                                                               |
| realtime.segment.commit.timeoutSeconds                 | Time threshold that controller will wait for the segment to be built by the server                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

## Kafka Partition-Level Connector&#x20;

### version 2.0

| Config                                   | Description                                                                                                                                                                    |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| stream.kafka.consumer.type               | **Allowed Value:** lowlevel                                                                                                                                                    |
| stream.kafka.consumer.factory.class.name | **Allowed Value:** org.apache.pinot.plugin.stream.kafka20.KafkaConsumerFactory                                                                                                 |
| stream.kafka.topic.name                  | (Required) Name of the kafka topic to be ingested                                                                                                                              |
| stream.kafka.broker.list                 | (Required) Connection string for the kafka broker                                                                                                                              |
| stream.kafka.buffer.size                 | **Default Value:** `512000`                                                                                                                                                    |
| stream.kafka.socket.timeout              | **Default Value:** `10000`                                                                                                                                                     |
| stream.kafka.fetcher.size                | **Default Value:** `100000`                                                                                                                                                    |
| stream.kafka.isolation.level             | <p><strong>Allowed Value:</strong> <code>read_committed</code> <strong>,</strong> <code>read_uncommitted</code><br><strong>Default:</strong> <code>read_uncommitted</code></p> |

## Kinesis Partition-level Connector

| Config                                     | Description                                                                                                                                                                                                                         |
| ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| stream.kinesis.consumer.type               | **Allowed Value:** lowlevel                                                                                                                                                                                                         |
| stream.kinesis.consumer.factory.class.name | **Allowed Value:** org.apache.pinot.plugin.stream.kinesis.KinesisConsumerFactory                                                                                                                                                    |
| stream.kinesis.topic.name                  | (Required) Name of the Kinesis data stream to consume                                                                                                                                                                               |
| region                                     | (Required) The AWS region where the configured Kinesis data stream resides                                                                                                                                                          |
| maxRecordsToFetch                          | <p>Maximum records to fetch during a single GetRecord request<br><strong>Default:</strong> <code>20</code></p>                                                                                                                      |
| shardIteratorType                          | <p>Similar to Kafka's offset reset property - indicates the point in the AWS Kinesis data stream from where the consumption should begin<br><strong>Allowed Values:</strong> <code>TRIM_HORIZON</code> , <code>LATEST</code>   </p> |

### Key-based Authentication Properties

| Config    | Description                                                          |
| --------- | -------------------------------------------------------------------- |
| accessKey | (Required) AWS Access key used to access the AWS Kinesis Data stream |
| secretKey | (Required) AWS Secret key used to access the AWS Kinesis Data stream |

### IAM Role-based Authentication Properties

| Config                                  | Description                                                                                                                                                                                                             |
| --------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p></p><p>iamRoleBasedAccessEnabled</p> | <p>Set to <code>true</code> when using IAM role-based authentication for connecting to the AWS Kinesis Data Stream<br><strong>Default:</strong> <code>false</code></p>                                                  |
| roleArn                                 | **(Required)** ARN of cross-account IAM role                                                                                                                                                                            |
| roleSessionName                         | <p>Unique identifier for a session when the client assumes the IAM role<br><strong>Default:</strong> <code>pinot-kinesis-&#x3C;UUID></code></p>                                                                         |
| externalId                              | Unique identifier used to manage trust between AWS accounts and prevent the confused deputy problem. More details [here](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles\_create\_for-user\_externalid.html) |
| sessionDurationSeconds                  | <p>Duration of the role session in seconds<br><strong>Default:</strong> <code>900</code></p>                                                                                                                            |
| asyncSessionUpdateEnabled               | <p>Flag to determine with the session update should be enabled<br><strong>Default:</strong> <code>true</code></p>                                                                                                       |

